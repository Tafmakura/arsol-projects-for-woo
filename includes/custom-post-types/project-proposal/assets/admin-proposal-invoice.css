/* CSS for Arsol Proposal Invoice Metabox */

#arsol_proposal_invoice_metabox .line-items-container {
    margin-bottom: 20px;
}

#arsol_proposal_invoice_metabox table {
    width: 100%;
    table-layout: fixed; /* Enable fixed table layout for better column control */
}

#arsol_proposal_invoice_metabox table th,
#arsol_proposal_invoice_metabox table td {
    vertical-align: middle;
}

/* Auto-stretching first columns - Products section */
#arsol_proposal_invoice_metabox .product-column {
    width: auto; /* Auto-stretch to fill remaining space */
    min-width: 200px;
}

#arsol_proposal_invoice_metabox .product-column select,
#arsol_proposal_invoice_metabox .product-column input {
    width: 100% !important;
}

/* Auto-stretching first columns - Fee sections */
#arsol_proposal_invoice_metabox .fee-name-column {
    width: auto; /* Auto-stretch to fill remaining space */
    min-width: 200px;
}

#arsol_proposal_invoice_metabox .fee-name-column input {
    width: 100%;
}

/* Fixed widths for common columns across all sections */
#arsol_proposal_invoice_metabox .taxable-column {
    width: 120px;
    text-align: center;
}

#arsol_proposal_invoice_metabox .taxable-column select {
    width: 100%;
}

#arsol_proposal_invoice_metabox .subtotal-column {
    width: 100px;
    text-align: right;
}

#arsol_proposal_invoice_metabox .actions-column {
    width: 50px;
    text-align: center;
}

#arsol_proposal_invoice_metabox .remove-line-item {
    color: #a00;
    text-decoration: none;
    font-weight: bold;
    padding: 2px 5px !important;
    line-height: 1 !important;
    height: auto !important;
}

#arsol_proposal_invoice_metabox .add-line-item {
    margin-top: 10px;
}

#arsol_proposal_invoice_metabox .line-items-totals {
    text-align: right;
}

#arsol_proposal_invoice_metabox .grand-total-amount {
    font-size: 1.2em;
    font-weight: bold;
    min-width: 150px;
    display: inline-block;
    text-align: right;
} 

#arsol_proposal_invoice_metabox .product-sub-text {
    font-size: 0.9em;
    color: #666;
    margin-top: 5px;
}

#arsol_proposal_invoice_metabox .totals-section {
    overflow: auto; /* Clearfix */
}

#arsol_proposal_invoice_metabox .billing-cycle-column select {
    width: 120px;
    margin-right: 5px;
}

/* Billing cycle - side by side layout with optimized spacing */
#arsol_proposal_invoice_metabox .billing-cycle-column {
    white-space: nowrap;
    width: 200px; /* Reduced from 250px to eliminate gap */
}

#arsol_proposal_invoice_metabox .billing-cycle-column select {
    display: inline-block;
    width: 95px; /* Reduced from 110px for better fit */
    margin-right: 5px;
    vertical-align: top;
}

#arsol_proposal_invoice_metabox .billing-cycle-column select:last-child {
    margin-right: 0;
}

/* Responsive design for smaller screens */
@media screen and (max-width: 1200px) {
    #arsol_proposal_invoice_metabox .billing-cycle-column {
        width: 180px; /* Proportionally reduced */
    }
    
    #arsol_proposal_invoice_metabox .billing-cycle-column select {
        width: 85px; /* Slightly smaller for medium screens */
    }
    
    /* Reduce fixed column widths on medium screens */
    #arsol_proposal_invoice_metabox .shipping-class-column {
        width: 130px;
    }
    
    #arsol_proposal_invoice_metabox .shipping-amount-column,
    #arsol_proposal_invoice_metabox .taxable-column {
        width: 100px;
    }
    
    /* Keep recurring fees amount column consistent */
    #arsol_proposal_invoice_metabox table .recurring-fee-item td:nth-child(3) {
        width: 100px !important; /* Slightly smaller on medium screens */
        max-width: 100px !important;
        min-width: 100px !important;
    }
    
    #arsol_proposal_invoice_metabox #product-line-items th:nth-child(4),
    #arsol_proposal_invoice_metabox #product-line-items td:nth-child(4),
    #arsol_proposal_invoice_metabox #product-line-items th:nth-child(5),
    #arsol_proposal_invoice_metabox #product-line-items td:nth-child(5) {
        width: 90px; /* Smaller price columns */
    }
}

@media screen and (max-width: 900px) {
    #arsol_proposal_invoice_metabox .billing-cycle-column {
        white-space: normal;
        width: 160px; /* Further reduced for mobile */
    }
    
    #arsol_proposal_invoice_metabox .billing-cycle-column select {
        width: 75px; /* Smaller selects for mobile */
        margin-bottom: 2px;
    }
    
    /* Allow first columns to maintain minimum widths on small screens */
    #arsol_proposal_invoice_metabox .product-column,
    #arsol_proposal_invoice_metabox .fee-name-column,
    #arsol_proposal_invoice_metabox .shipping-description-column {
        min-width: 150px; /* Smaller minimum on mobile */
    }
    
    /* Recurring fees fee name column - smaller minimum on mobile */
    #arsol_proposal_invoice_metabox table .recurring-fee-item .fee-name-column {
        min-width: 120px !important; /* Even smaller minimum for more stretch */
    }
    
    /* Recurring fees amount column - mobile size */
    #arsol_proposal_invoice_metabox table .recurring-fee-item td:nth-child(3) {
        width: 80px !important; /* Mobile size */
        max-width: 80px !important;
        min-width: 80px !important;
    }
    
    /* Reduce all fixed columns further on mobile */
    #arsol_proposal_invoice_metabox .shipping-class-column,
    #arsol_proposal_invoice_metabox .shipping-amount-column,
    #arsol_proposal_invoice_metabox .taxable-column {
        width: 80px;
    }
    
    #arsol_proposal_invoice_metabox .subtotal-column {
        width: 70px;
    }
    
    #arsol_proposal_invoice_metabox .actions-column {
        width: 40px;
    }
}

.line-items-totals::after {
    content: "";
    clear: both;
    display: table;
}

/* Loading state for product rows */
#arsol_proposal_invoice_metabox .line-item.arsol-loading {
    opacity: 0.6;
    pointer-events: none;
    position: relative;
}

#arsol_proposal_invoice_metabox .line-item.arsol-loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid #f3f3f3;
    border-top: 2px solid #0073aa;
    border-radius: 50%;
    animation: arsol-spin 1s linear infinite;
}

@keyframes arsol-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* WordPress admin button styling consistency */
#arsol_proposal_invoice_metabox .add-line-item:hover {
    background-color: #f0f0f1;
    border-color: #0a4b78;
    color: #0a4b78;
}

#arsol_proposal_invoice_metabox .line-item-row.new-item {
    /* ... existing code ... */
}

/* Shipping section - WooCommerce patterns with auto-stretch */
#arsol_proposal_invoice_metabox .shipping-description-column {
    width: auto; /* Auto-stretch to fill remaining space */
    min-width: 200px;
}

#arsol_proposal_invoice_metabox .shipping-description-column input {
    width: 100%;
}

#arsol_proposal_invoice_metabox .shipping-class-column {
    width: 150px; /* Fixed width */
}

#arsol_proposal_invoice_metabox .shipping-class-column select {
    width: 100%;
}

#arsol_proposal_invoice_metabox .shipping-amount-column {
    width: 120px; /* Fixed width */
}

#arsol_proposal_invoice_metabox .shipping-amount-column input {
    width: 100%;
    text-align: right;
}

/* Additional fixed widths for product section columns */
#arsol_proposal_invoice_metabox .start-date-column {
    width: 130px;
}

#arsol_proposal_invoice_metabox .start-date-column input {
    width: 100%;
}

/* Quantity, Price columns in products */
#arsol_proposal_invoice_metabox #product-line-items th:nth-child(3),
#arsol_proposal_invoice_metabox #product-line-items td:nth-child(3) {
    width: 80px; /* Quantity */
}

#arsol_proposal_invoice_metabox #product-line-items th:nth-child(4),
#arsol_proposal_invoice_metabox #product-line-items td:nth-child(4),
#arsol_proposal_invoice_metabox #product-line-items th:nth-child(5),
#arsol_proposal_invoice_metabox #product-line-items td:nth-child(5) {
    width: 100px; /* Price columns */
}

#arsol_proposal_invoice_metabox #product-line-items input[type="number"],
#arsol_proposal_invoice_metabox #product-line-items input.wc_input_price {
    width: 100%;
    text-align: right;
}

/* Amount columns in fee sections */
#arsol_proposal_invoice_metabox #onetime-fee-line-items th:nth-child(2),
#arsol_proposal_invoice_metabox #onetime-fee-line-items td:nth-child(2) {
    width: 120px; /* Amount */
}

#arsol_proposal_invoice_metabox .fee-amount-input {
    width: 100%;
    text-align: right;
}

/* Recurring fees section - specific column widths with higher specificity */
#arsol_proposal_invoice_metabox table .recurring-fee-item .fee-name-column {
    width: auto !important; /* Auto-stretch to fill remaining space */
    min-width: 150px !important; /* Reduced minimum for more stretch */
}

#arsol_proposal_invoice_metabox table .recurring-fee-item .fee-name-column input {
    width: 100% !important;
}

/* Amount column in recurring fees (3rd column) - force consistent width */
#arsol_proposal_invoice_metabox table .recurring-fee-item td:nth-child(3) {
    width: 120px !important; /* Force same as other amount columns */
    max-width: 120px !important;
    min-width: 120px !important;
}

#arsol_proposal_invoice_metabox table .recurring-fee-item td:nth-child(3) input {
    width: 100% !important;
    text-align: right !important;
}

/* All fee amount inputs styling */
#arsol_proposal_invoice_metabox .fee-amount-input {
    width: 100%;
    text-align: right;
}

/* Responsive design for shipping columns */
@media screen and (max-width: 1200px) {
    #arsol_proposal_invoice_metabox .shipping-description-column {
        width: 30%;
    }
    
    #arsol_proposal_invoice_metabox .shipping-class-column {
        width: 25%;
    }
    
    #arsol_proposal_invoice_metabox .shipping-amount-column {
        width: 20%;
    }
}

@media screen and (max-width: 900px) {
    #arsol_proposal_invoice_metabox .shipping-description-column,
    #arsol_proposal_invoice_metabox .shipping-class-column,
    #arsol_proposal_invoice_metabox .shipping-amount-column {
        width: auto;
        min-width: 120px;
    }
}

/* Section footer flex layout - button left, totals right */
#arsol_proposal_invoice_metabox .section-footer {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-top: 15px;
    gap: 20px;
}

#arsol_proposal_invoice_metabox .section-footer-left {
    flex: 0 0 auto; /* Don't grow, don't shrink */
}

#arsol_proposal_invoice_metabox .section-footer-right {
    flex: 0 0 auto; /* Don't grow, don't shrink */
    text-align: right;
}

#arsol_proposal_invoice_metabox .section-footer .section-totals {
    margin: 0; /* Remove any existing margins */
}

#arsol_proposal_invoice_metabox .section-footer .section-totals table {
    margin: 0;
    width: auto;
    border-collapse: collapse;
}

#arsol_proposal_invoice_metabox .section-footer .section-totals table td {
    padding: 5px 10px;
    vertical-align: middle;
    text-align: right;
}

#arsol_proposal_invoice_metabox .section-footer .section-totals table td:first-child {
    text-align: right;
    padding-right: 15px;
}

/* Ensure buttons are properly styled */
#arsol_proposal_invoice_metabox .section-footer .add-line-item {
    margin: 0;
}

/* Recurring fees amount column - mobile size */
#arsol_proposal_invoice_metabox table .recurring-fee-item td:nth-child(3) {
    width: 80px !important; /* Mobile size */
    max-width: 80px !important;
    min-width: 80px !important;
}

/* Section footer responsive - stack on mobile */
#arsol_proposal_invoice_metabox .section-footer {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
}

#arsol_proposal_invoice_metabox .section-footer-right {
    text-align: center; /* Center totals on mobile */
}

/* Reduce all fixed columns further on mobile */
#arsol_proposal_invoice_metabox .shipping-class-column,
#arsol_proposal_invoice_metabox .shipping-amount-column,
#arsol_proposal_invoice_metabox .taxable-column {
    width: 80px;
}